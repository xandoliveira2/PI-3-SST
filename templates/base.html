{% load static %}

<!doctype html>
<html lang="en">

<head>
  <style>
    section label {
      font-size: 30px;
    }
  </style>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bootstrap Demo</title>
  <link rel="shortcut icon" href="{% static 'imagens/favicon.svg' %}" type="image/x-icon">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="{% static 'estilo.css' %}">

</head>

<body>
  <script>
    const url_atual = window.location.href
    if (!url_atual.includes("param1") || !url_atual.includes("param2") || !url_atual.includes("param3")) {
      window.location.replace("http://localhost:8000/grafico/density-map/?param1=01/12/2024&param2=00:00&param3=carros%20motos%20");
    }
  </script>
      <script>
        fetch('{% static "cores.json" %}').then(response => response.json()).then(data => {
       
        let vermelho = data.vermelho;
        let laranja = data.laranja;
        let amarelo = data.amarelo;
        let azul = data.azul;
        let h2RED = document.getElementById('vermelho');
        let h2ORANGE = document.getElementById('laranja');
        let h2YELLOW = document.getElementById('amarelo');
        let h2BLUE = document.getElementById('azul');
        let h2GREEN = document.getElementById('verde');
        h2RED.value = vermelho;
        h2ORANGE.value = laranja;
        h2YELLOW.value = amarelo;
        h2BLUE.value = azul;
        h2GREEN.value = azul - 1;
        })
      </script>

  <nav style="width: 100%;display: flex;justify-content: space-between;align-items: center;padding-right: 50px;">
    <img src="{% static 'imagens/logo.png' %}" alt="Logo">
    
      <a href="#">
        <li>Gráfico</li>
      </a>
      <a href="#">
        <li>Relatório</li>
      </a>


      <a href="#">
        <li>Sobre</li>
      </a>
      <a href="/">

        <li>Sair</li>
      </a>
    
  </nav>





          {% block 'data' %}{% endblock %}

        



          {% block 'filtro_data' %} {% endblock %}

 

      {% block 'colorConfiguration' %}{% endblock %}


      {% block 'filtro_veiculos' %}{% endblock %}
     

    {% block 'dashboard1' %}{% endblock %}
  </div>

  

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      if (url_atual.includes("param1") && url_atual.includes("param2")) {
        const urlParams = new URLSearchParams(window.location.search);

        const param1Value = urlParams.get("param1");
        const param2Value = urlParams.get("param2");
        let param3value = urlParams.get("param3");
        if (param3value) {
          param3value = param3value.trim()
          let arraysplit = param3value.split(" ");
          arraysplit.forEach(element => {
            if (element) {
              switch (element) {
                case "carros":
                  document.getElementById(element).checked = true;
                  break;
                case "motos":
                  document.getElementById(element).checked = true;
                  break;
                case "vans":
                  document.getElementById(element).checked = true;
                  break;
                case "caminhoes":
                  document.getElementById(element).checked = true;
                  break;
                case "onibus":
                  document.getElementById(element).checked = true;
                  break;
                default:
                  break;
              }
            }
          });
        }

        document.getElementById('data_form').value = param1Value;
        atualizar_horarios()
        document.getElementById('hour_form').value = param2Value;
      }
    })
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
</body>

</html>
